ACTOR PlasmaPistol : BdLiteWeapon
{
	Weapon.SelectionOrder 7
	Weapon.AmmoType1 "Cell"
	Weapon.AmmoGive1 10
	Weapon.SlotNumber 2
    Inventory.PickupSound "PLSDRAW"
	Inventory.PickupMessage "Plasma pistol!"
	States
	{
	Spawn:
		PLSP Z -1 Bright
		Stop
	Ready:
        TNT1 A 0 A_PlaySound("PLSDRAW")
		PLSP EDC 1
	ReadyLoop:
		PLSP A 1 A_WeaponReady(WRF_ALLOWZOOM)
		Goto ReadyLoop

	DontNeedToReload:
		Goto ReadyLoop
	Deselect:
        PLSP CDE 1
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1
		Wait
	Fire:
		TNT1 A 0 A_CheckReload
		TNT1 A 0 A_JumpIfInventory("Cell",1,1)
        Goto NoAmmo
        TNT1 A 0 A_PlaySound ("PlasmaHi/Fire", CHAN_WEAPON)
		TNT1 A 0 A_Takeinventory("Cell",1)
		TNT1 A 0 A_FireCustomMissile("PlasmaFlareSpawn", 0, 0, 0, 0)
		PLSP B 1 BRIGHT A_FireCustomMissile("PlasmaPistolBall", 0, 1, 0, 0)
		PLSP B 1 A_FireCustomMissile("PlayerQuakeSmall", 0, 0, 0, 0)
		PLSP B 1
		PLSP F 3
		PLSP A 9
		TNT1 A 0 A_ReFire
		Goto ReadyLoop
	NoAmmo:
		TNT1 A 0 A_PlaySound("BEP")
		Goto ReadyLoop
	}
}

ACTOR PlasmaPistolBall : Plasma_Ball
{
	Radius 10
	Height 2
	Speed 30
	Damage 6
	Scale 0.05
}

ACTOR PlasmaPistolBallMonster : PlasmaPistolBall
{
	Radius 6
	Speed 15
	Damage (random(5,10)+5)
}
